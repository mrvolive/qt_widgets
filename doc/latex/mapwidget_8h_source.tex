\doxysection{mapwidget.\+h}
\hypertarget{mapwidget_8h_source}{}\label{mapwidget_8h_source}\index{view/mapwidget.h@{view/mapwidget.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ mapwidget.h\ (adapt√©)}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#ifndef\ MAPWIDGET\_H}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ MAPWIDGET\_H}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}controller/mapcontroller.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}model/mapmodel.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <QNetworkAccessManager>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <QWidget>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{class\ }QNetworkReply;}
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }QPaintEvent;}
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }QResizeEvent;}
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }QMouseEvent;}
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }QWheelEvent;}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00023\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classMapWidget_aa214385067e88a12f9a3e57e10b44c21}{MapWidget}}\ :\ \textcolor{keyword}{public}\ QWidget\ \{}
\DoxyCodeLine{00024\ \ \ \ \ Q\_OBJECT}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classMapModel}{MapModel}}*\ \mbox{\hyperlink{classMapWidget_a567ab62e3579669c9caa81ceac75c264}{\_mapModel}};\ }
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classMapController}{MapController}}*\ \mbox{\hyperlink{classMapWidget_a969d17e3abd13452d5e97e53bea4272b}{\_mapController}};\ }
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ QVector<QPixmap>\ \mbox{\hyperlink{classMapWidget_a8692bc5163c4709fba32c41a32e0d235}{\_tiles}};\ }
\DoxyCodeLine{00031\ \ \ \ \ QVector<QPoint>\ \mbox{\hyperlink{classMapWidget_ae12335f9e119b672ef8692e8381b5560}{\_tilePositions}};\ }
\DoxyCodeLine{00032\ \ \ \ \ QNetworkAccessManager\ \mbox{\hyperlink{classMapWidget_aea10b875e543c83cf2b03112cf03ee4f}{\_networkManager}};\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMapWidget_a29a59aaa52b45c6c9dcda3134afa0c25}{\_pendingRequests}};\ }
\DoxyCodeLine{00034\ \ \ \ \ QPoint\ \mbox{\hyperlink{classMapWidget_a8f0150449bac4f18d82f99ce01b133e8}{\_lastMousePos}};\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMapWidget_a081af32c457007c63d13eaab4b607ac2}{\_isDragging}};\ }
\DoxyCodeLine{00036\ \ \ \ \ QPixmap\ \mbox{\hyperlink{classMapWidget_a01ec4f2f49e730da833225814d797d0c}{\_cachedView}};\ }
\DoxyCodeLine{00037\ \ \ \ \ QPoint\ \mbox{\hyperlink{classMapWidget_a1ec6a0dfddfaca6a1cd1acda4144cde3}{\_dragOffset}};\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMapWidget_a236ccdff2f73000122c7e29cfe26b2e4}{\_needFullRefresh}};\ }
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_ae76b470447901f89076b2bb6c652a757}{mouseDoubleClickEvent}}(QMouseEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{classMapWidget_aa214385067e88a12f9a3e57e10b44c21}{MapWidget}}(\mbox{\hyperlink{classMapModel}{MapModel}}*\ mapModel,\ \mbox{\hyperlink{classMapController}{MapController}}*\ mapController,\ QWidget*\ parent\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00061\ \ \ \ \ QPair<double,\ double>\ \mbox{\hyperlink{classMapWidget_aee458161ad1a9d70b216e3ab4fa1b69b}{screenToLonLat}}(\textcolor{keyword}{const}\ QPoint\&\ screenPos);}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ signals:}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a04ac8a5a0da413ec8973c37061125b0d}{mousePositionChanged}}(\textcolor{keywordtype}{double}\ lon,\ \textcolor{keywordtype}{double}\ lat);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{keyword}{public}\ slots:}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a22451ae5484c3c84677f90233ea4ca23}{onCenterChanged}}();}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_aeecb82854e587c20ea7b3de9ab8f056c}{onZoomChanged}}();}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_ab89fc473ede5f15551123a39f836226f}{loadTiles}}();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a81d821a4bc2ff4fade54d4534c5dfb4f}{renderFullView}}();}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00100\ \ \ \ \ QPoint\ \mbox{\hyperlink{classMapWidget_a1f933457c37c5cba27bc6cac314f9ad5}{lonLatToTile}}(\textcolor{keywordtype}{double}\ lon,\ \textcolor{keywordtype}{double}\ lat,\ \textcolor{keywordtype}{int}\ zoom);}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00109\ \ \ \ \ QPointF\ \mbox{\hyperlink{classMapWidget_abfbeaa2df029ec4bd145c7ed078568ff}{lonLatToTileF}}(\textcolor{keywordtype}{double}\ lon,\ \textcolor{keywordtype}{double}\ lat,\ \textcolor{keywordtype}{int}\ zoom);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00118\ \ \ \ \ QPair<double,\ double>\ \mbox{\hyperlink{classMapWidget_adad42fd0f581e23cb40394eadced8162}{tileToLonLat}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ zoom);}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a1bbb7069c23580016ac4fad9800f4f5e}{downloadTile}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ zoom);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00135\ \ \ \ \ QString\ \mbox{\hyperlink{classMapWidget_a80b10d05dfd2ed27db4c4cdaa6d5d6e5}{tileFilePath}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ zoom);}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a5f8bd5f995e15b66ac48b7fbb9243726}{paintEvent}}(QPaintEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_ab592d95fedf75d119f24d735cee48731}{resizeEvent}}(QResizeEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_aa48e5f8c7c771113afef4c63d8c0f6c4}{mousePressEvent}}(QMouseEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_ac4fa5570db0c7035e90f990ae9c0ea27}{mouseMoveEvent}}(QMouseEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a88af0745f1ebbbdd1b5d48518dbcd4d9}{mouseReleaseEvent}}(QMouseEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a417abfa08f513ccdb2d205145891985d}{wheelEvent}}(QWheelEvent*\ event)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \textcolor{keyword}{private}\ slots:}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMapWidget_a4f94284b90d64971dfc53c48a68447ab}{onTileDownloaded}}(QNetworkReply*\ reply);}
\DoxyCodeLine{00180\ \};}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ MAPWIDGET\_H}}

\end{DoxyCode}
